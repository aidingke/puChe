webpackJsonp([5],{188:function(e,t,a){function l(e){a(224),a(223)}var s=a(16)(a(205),a(238),l,"data-v-07cbed7e",null);e.exports=s.exports},205:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"helpSell",data:function(){return{dialogVisible:!1,dialogVisibleTitle:"",validateForm:{id:"",unAuditText:""},rules:{unAuditText:[{required:!0,message:"原因不能为空",trigger:"blur"}]},options:[{value:"",label:"全部状态"},{value:"0",label:"待审核"},{value:"1",label:"审核通过"}],isShow:!1,total:0,searchData:{pageNo:1,pageSize:10,carNo:"",status:""},tableData:[]}},created:function(){this.$store.state.breadcrumb=[{path:"/",name:"捕车平台"},{name:"帮卖管理"}],this.request()},methods:{currentChange:function(e){this.searchData.pageNo=e,this.request()},statusText:function(e){return"0"===e?"待审核":"1"===e?"审核通过":"审核不通过"},request:function(){var e=this;e.$c.ajax({url:"buche/api/manage/helpSell",data:{reqAct:"list",pageNo:e.searchData.pageNo,pageSize:e.searchData.pageSize,carNo:e.searchData.carNo,status:e.searchData.status},success:function(t){if(e.isShow=!0,"0"===t.retCode){var a=[];t.result.carList.forEach(function(t){var l={id:t.id,carNo:t.carNo||"-",name:t.name||"-",updateTime:t.updateTime||"-",status:t.status,statusDes:e.statusText(t.status)||"-",remark:t.remark||"-",code:t.rptUrl,flag:t.flag,brand:t.brand};a.push(l)}),e.total=t.result.totalCnt,e.tableData=a}else e.$message.error({duration:1500,message:t.retMsg})}})},lookCarReport:function(e){var t=this,a=this.CONST.REPORT_URL+e;this.$alert('<iframe src="'+a+'" class="helpSellReportClassIframe">',"车况详情",{dangerouslyUseHTMLString:!0,showConfirmButton:!1,customClass:"helpSellReportClass"}).catch(function(){t.$c.$(".helpSellReportClassIframe")[0].style.width="99.5%"}),setTimeout(function(){t.$c.$(".helpSellReportClassIframe")[0].style.width="100%"},1e3)},handleClose:function(){this.validateForm.unAuditText="",this.dialogVisible=!1},dialogVisibleSureFun:function(){},unAuditLayerShow:function(e){this.dialogVisibleTitle="审核不通过原因",this.dialogVisible=!0,this.validateForm.id=e,this.dialogVisibleSureFun=this.unAudit},unAudit:function(e){var t=this;t.$refs[e].validate(function(e){e&&t.postCheck(0,t.validateForm.id)})},auditPost:function(e){var t=this;this.$confirm("确认通过审核么？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.postCheck(1,e)}).catch(function(){})},postCheck:function(e,t){var a=this,l={reqAct:"check",id:t,oper:e,reason:a.validateForm.unAuditText};a.$c.ajax({url:"buche/api/manage/car",data:l,success:function(e){"0"===e.retCode?(a.$message({message:e.retMsg,type:"success"}),a.reload()):a.$message.error({duration:1500,message:e.retMsg})}})},soldOut:function(e){var t=this;t.dialogVisibleTitle="下架原因",t.dialogVisible=!0,t.validateForm.id=e,this.dialogVisibleSureFun=this.soldOutFun},soldOutFun:function(e){var t=this;t.$refs[e].validate(function(e){if(e){var a={reqAct:"helpSellsoldOut",carId:t.validateForm.id,reason:t.validateForm.unAuditText};t.$c.ajax({url:"buche/api/manage/helpSell",data:a,success:function(e){"0"===e.retCode?(t.$message({message:e.retMsg,type:"success"}),t.reload()):t.$message.error({duration:1500,message:e.retMsg})}})}})},reload:function(){var e=location.hash;location.hash="#/zeroPage",setTimeout(function(){location.hash=e},50)}}}},209:function(e,t,a){t=e.exports=a(177)(!0),t.push([e.i,".helpSellReportClass{height:80%;width:401px}.helpSellReportClass .el-message-box__content{position:relative;width:100%;height:96%;padding:0}.helpSellReportClass .el-message-box__content .el-message-box__message,.helpSellReportClass .el-message-box__content p{height:100%}.helpSellReportClass .el-message-box__content iframe.helpSellReportClassIframe{width:99.5%;height:100%;border:0}","",{version:3,sources:["E:/project/buche/src/pages/carPlatform/helpSell.vue"],names:[],mappings:"AACA,qBACE,WAAY,AACZ,WAAa,CACd,AACD,8CACE,kBAAmB,AACnB,WAAY,AACZ,WAAY,AACZ,SAAW,CACZ,AACD,uHAEE,WAAa,CACd,AACD,+EACE,YAAa,AACb,YAAa,AACb,QAAU,CACX",file:"helpSell.vue",sourcesContent:["\n.helpSellReportClass {\n  height: 80%;\n  width: 401px;\n}\n.helpSellReportClass .el-message-box__content {\n  position: relative;\n  width: 100%;\n  height: 96%;\n  padding: 0;\n}\n.helpSellReportClass .el-message-box__content .el-message-box__message,\n.helpSellReportClass .el-message-box__content p {\n  height: 100%;\n}\n.helpSellReportClass .el-message-box__content iframe.helpSellReportClassIframe {\n  width: 99.5%;\n  height: 100%;\n  border: 0;\n}\n"],sourceRoot:""}])},210:function(e,t,a){t=e.exports=a(177)(!0),t.push([e.i,".helpSell .searchBar[data-v-07cbed7e]{margin-bottom:20px}.helpSell .searchBar .el-col[data-v-07cbed7e]{margin-right:10px}.helpSell .searchBar button[data-v-07cbed7e]{margin-top:4px}.helpSell .el-date-editor[data-v-07cbed7e]{width:100%}","",{version:3,sources:["E:/project/buche/src/pages/carPlatform/helpSell.vue"],names:[],mappings:"AACA,sCACE,kBAAoB,CACrB,AACD,8CACE,iBAAmB,CACpB,AACD,6CACE,cAAgB,CACjB,AACD,2CACE,UAAY,CACb",file:"helpSell.vue",sourcesContent:["\n.helpSell .searchBar[data-v-07cbed7e] {\n  margin-bottom: 20px;\n}\n.helpSell .searchBar .el-col[data-v-07cbed7e] {\n  margin-right: 10px;\n}\n.helpSell .searchBar button[data-v-07cbed7e] {\n  margin-top: 4px;\n}\n.helpSell .el-date-editor[data-v-07cbed7e] {\n  width: 100%;\n}\n"],sourceRoot:""}])},223:function(e,t,a){var l=a(209);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(178)("2f68d8ce",l,!0)},224:function(e,t,a){var l=a(210);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(178)("487157fc",l,!0)},238:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return e.isShow?a("div",{staticClass:"helpSell"},[a("el-col",{staticClass:"searchBar",attrs:{span:24}},[a("el-col",{attrs:{span:3,xs:11}},[a("el-input",{attrs:{placeholder:"车源编号"},model:{value:e.searchData.carNo,callback:function(t){e.$set(e.searchData,"carNo",t)},expression:"searchData.carNo"}})],1),e._v(" "),a("el-col",{attrs:{span:3,xs:11}},[a("el-select",{attrs:{placeholder:"所有状态"},model:{value:e.searchData.status,callback:function(t){e.$set(e.searchData,"status",t)},expression:"searchData.status"}},e._l(e.options,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),a("el-col",{attrs:{span:2}},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.request}},[e._v("搜索")])],1)],1),e._v(" "),a("el-table",{staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:e.tableData,border:""}},[a("el-table-column",{attrs:{prop:"carNo",label:"车源编号"}}),e._v(" "),a("el-table-column",{attrs:{prop:"brand",label:"车系车型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"车辆来源"}}),e._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"最后操作时间"}}),e._v(" "),a("el-table-column",{attrs:{prop:"statusDes",label:"状态"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"操作说明"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","min-width":"320px"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"==e.tableData[t.$index].flag?[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){e.lookCarReport(e.tableData[t.$index].code)}}},[e._v("查看车况")]),e._v(" "),"0"==e.tableData[t.$index].status?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){e.auditPost(e.tableData[t.$index].id)}}},[e._v("审核通过")]):e._e(),e._v(" "),"0"==e.tableData[t.$index].status?a("el-button",{attrs:{type:"warning",size:"small"},on:{click:function(a){e.unAuditLayerShow(e.tableData[t.$index].id)}}},[e._v("审核不通过")]):e._e()]:e._e(),e._v(" "),"1"==e.tableData[t.$index].status||"0"==e.tableData[t.$index].flag?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){e.soldOut(e.tableData[t.$index].id)}}},[e._v("下架")]):e._e()]}}])})],1),e._v(" "),a("el-dialog",{attrs:{title:e.dialogVisibleTitle,visible:e.dialogVisible,width:"30%","close-on-click-modal":!1,"before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"validateForm",attrs:{model:e.validateForm,rules:e.rules}},[a("el-form-item",{attrs:{prop:"unAuditText"}},[a("el-input",{attrs:{type:"textarea",rows:5,placeholder:"请输入内容",value:e.validateForm.unAuditText},model:{value:e.validateForm.unAuditText,callback:function(t){e.$set(e.validateForm,"unAuditText",t)},expression:"validateForm.unAuditText"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:e.handleClose}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(t){e.dialogVisibleSureFun("validateForm")}}},[e._v("确 定")])],1)],1),e._v(" "),e.total>e.searchData.pageSize?a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:e.total,"page-size":e.searchData.pageSize},on:{"current-change":e.currentChange}}):e._e()],1):e._e()},staticRenderFns:[]}}});
//# sourceMappingURL=5.42222e2e51c1983aaebe.js.map